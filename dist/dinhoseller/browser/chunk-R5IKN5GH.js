import{a as se,b as Be}from"./chunk-CFA2N6T3.js";import{a as qe,b as He}from"./chunk-EGDRS6EX.js";import{a as je,b as ze}from"./chunk-QZFPSUB7.js";import{a as ae,b as le,c as me}from"./chunk-RUXIFF5Z.js";import{A as Le,B as Pe,D as Oe,d as X,e as ee,f as te,h as ie,i as Te,j as Me,k as Ne,l as De,m as Ge,n as Ve,o as ke,t as ne,u as oe,v as re,w as Ae,z as Re}from"./chunk-NODLAXFO.js";import{Ja as A,Ka as d,Ma as R,Na as L,Pa as P,Qa as q,Ra as B,Ua as j,Wa as Z,Xa as W,Ya as O,Za as H,fc as z,gc as U,hc as Q,m as G,na as V,nc as K,oc as Fe,pc as J,qc as $,ra as k,rc as Y,t as Ie,ya as ve}from"./chunk-OZDOVG45.js";import{Cb as E,Db as c,Dc as M,Eb as f,Fc as we,Ib as ge,Kb as fe,Lb as ye,Lc as N,Mb as _e,Qb as r,Ra as l,Rb as T,Rc as D,Sb as he,Ub as Ee,Vb as Ce,Wa as u,Wb as be,Xb as Se,Yb as h,Zb as y,a as ce,ab as w,d as ue,ea as _,fa as v,fb as I,ic as b,nb as m,qb as F,sc as xe,wb as n,xb as e,yb as a}from"./chunk-6FTOFNHU.js";var rt,S,de,Ze=ue(()=>{"use strict";H();Q();Fe();me();Te();Y();re();te();D();xe();Ie();H();ve();He();Be();D();Q();Y();me();re();te();rt=()=>({height:"100%",width:"3.5rem"}),S=p=>({"ng-invalid ng-dirty":p}),de=class p{constructor(i,t,o,s,g){this.router=i;this.fb=t;this.messageService=o;this.clientService=s;this.employeeService=g;this.employeeForm=this.fb.group({lastname:["",d.required],firstname:["",d.required],date_of_birth:[null],genre:[null],address:[""],address_mail:["",[d.email]],country:[null],city:[""],personnal_mail_address:["",[d.email]],phone:["",[d.required,d.pattern("^[0-9]+$")]],post:[""],start_date_of_hire:[null],contract_type:[null],salary:[null,d.min(0)],role_id:[null,d.required],department:[null]})}employeeForm;erreurInput=!1;responseError;loading=!1;genres=[{name:"Masculin",code:"M"},{name:"Feminin",code:"F"}];countries=[{name:"Afrique du Sud",code:"ZA"},{name:"Alg\xE9rie",code:"DZ"},{name:"Angola",code:"AO"},{name:"B\xE9nin",code:"BJ"},{name:"Botswana",code:"BW"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cap-Vert",code:"CV"},{name:"Cameroun",code:"CM"},{name:"R\xE9publique centrafricaine",code:"CF"},{name:"Comores",code:"KM"},{name:"R\xE9publique du Congo",code:"CG"},{name:"R\xE9publique d\xE9mocratique du Congo",code:"CD"},{name:"Djibouti",code:"DJ"},{name:"\xC9gypte",code:"EG"},{name:"Guin\xE9e \xE9quatoriale",code:"GQ"},{name:"\xC9rythr\xE9e",code:"ER"},{name:"Eswatini",code:"SZ"},{name:"\xC9thiopie",code:"ET"},{name:"Gabon",code:"GA"},{name:"Gambie",code:"GM"},{name:"Ghana",code:"GH"},{name:"Guin\xE9e",code:"GN"},{name:"Guin\xE9e-Bissau",code:"GW"},{name:"C\xF4te d'Ivoire",code:"CI"},{name:"Kenya",code:"KE"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libye",code:"LY"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Mali",code:"ML"},{name:"Mauritanie",code:"MR"},{name:"Maurice",code:"MU"},{name:"Maroc",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Namibie",code:"NA"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Rwanda",code:"RW"},{name:"Sao Tom\xE9-et-Principe",code:"ST"},{name:"S\xE9n\xE9gal",code:"SN"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Somalie",code:"SO"},{name:"Soudan",code:"SD"},{name:"Soudan du Sud",code:"SS"},{name:"Tanzanie",code:"TZ"},{name:"Togo",code:"TG"},{name:"Tunisie",code:"TN"},{name:"Ouganda",code:"UG"},{name:"Zambie",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];roles=[{name:"Administrateur",code:2},{name:"Utilisateur",code:3}];contrats=[{name:"Contrat \xE0 Dur\xE9e Ind\xE9termin\xE9e",code:"cdi"},{name:"Contrat \xE0 Dur\xE9e D\xE9termin\xE9e",code:"cdd"},{name:"Contrat de Travail Temporaire",code:"interim"},{name:"Contrat de Projet ou de Mission",code:"mission"},{name:"Contrat \xE0 Temps Partiel",code:"temps_partiel"},{name:"Contrat de Travail Intermittent",code:"intermittent"},{name:"Contrat d'Apprentissage",code:"apprentissage"},{name:"Contrat de Professionnalisation",code:"professionnalisation"},{name:"Contrat de Prestation de Services",code:"freelance"},{name:"Portage Salarial",code:"portage_salarial"},{name:"Convention de Stage",code:"stage"}];departements=[{name:"Direction",code:"direction"},{name:"Ventes",code:"ventes"},{name:"Stock & Logistique",code:"stock_logistique"},{name:"Comptabilit\xE9 & Finance",code:"comptabilite"},{name:"Service Client",code:"service_client"},{name:"S\xE9curit\xE9",code:"securite"},{name:"Livraison",code:"livraison"}];onSubmit(){this.employeeForm.invalid?(this.erreurInput=!0,this.showError("Veuillez remplir tous les champs obligatoires.")):(console.log(this.employeeForm.value),this.erreurInput=!1,this.loading=!0,this.employeeService.addEmployee(this.employeeForm.value).subscribe({next:()=>{this.showSuccess("Employ\xE9 ajout\xE9 avec succ\xE8s")},error:i=>{this.showError(i.error.error),console.error(i.error.error),this.loading=!1},complete:()=>{this.loading=!1}}))}showSuccess(i){this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:i})}showError(i){this.messageService.add({severity:"error",summary:"Erreur",detail:i})}clearForm(){this.employeeForm.reset()}goToEmployeeList(){this.router.navigate(["employees/employeeslist"])}static \u0275fac=function(t){return new(t||p)(u(G),u(Z),u(k),u(qe),u(se))};static \u0275cmp=w({type:p,selectors:[["app-addemployee"]],decls:93,vars:29,consts:[[1,"flex","gap-4","mb-12"],["icon","pi pi-arrow-left","severity","contrast",1,"text-xl",3,"click"],[1,"text-xl"],[1,"text-2xl","font-bold","text-primary"],["action","",1,"w-full","mt-4",3,"ngSubmit","formGroup"],[1,"w-full"],[1,"card"],[1,"flex","flex-col","md:flex-row","gap-6","w-full"],[1,"flex","flex-wrap","gap-2","w-full"],["for","lastname"],["pInputText","","type","text","formControlName","lastname",3,"ngClass"],["for","firstname"],["pInputText","","type","text","formControlName","firstname",3,"ngClass"],[1,"flex","flex-col","md:flex-row","gap-6","w-full","mt-6"],["for","date_of_birth"],["formControlName","date_of_birth","inputId","icondisplay",1,"w-full",3,"iconDisplay","showIcon"],["for","genre"],["formControlName","genre","optionLabel","name",1,"w-full",3,"options"],["for","address"],["pInputText","","type","text","formControlName","address"],["for","address_mail"],["pInputText","","type","email","formControlName","address_mail",3,"ngClass"],["for","country"],["formControlName","country","optionLabel","name",1,"w-full",3,"options"],["for","city"],["pInputText","","type","text","formControlName","city"],["for","personnal_mail_address"],["pInputText","","type","email","formControlName","personnal_mail_address"],["for","phone"],["pInputText","","type","tel","formControlName","phone",3,"ngClass"],[1,"flex","flex-wrap","gap-2","w-full","mt-6"],["for","post"],["pInputText","","type","text","formControlName","post"],["for","start_date_of_hire"],["formControlName","start_date_of_hire","inputId","icondisplay",1,"w-full",3,"iconDisplay","showIcon"],["for","contract_type"],["formControlName","contract_type","optionLabel","name",1,"w-full",3,"options"],["for","salary"],["pInputText","","type","number","formControlName","salary"],["for","role_id"],["formControlName","role_id","optionLabel","name",1,"w-full",3,"options","ngClass"],["for","department"],["formControlName","department","optionLabel","name",1,"w-full",3,"options"],[1,"flex","flex-wrap","gap-4","mb-6","mt-6"],["label","Vider","icon","pi pi-times","severity","danger","outlined","",3,"click"],["type","submit","label","Enregistrer","icon","pi pi-save","severity","contrast",3,"loading"]],template:function(t,o){t&1&&(n(0,"p-fluid")(1,"div",0)(2,"div")(3,"p-button",1),c("click",function(){return o.goToEmployeeList()}),e()(),n(4,"div")(5,"div")(6,"span",2),r(7,"Retourner \xE0 la liste des employ\xE9s"),e()(),n(8,"div")(9,"span",3),r(10,"Enregistrer un employ\xE9"),e()()()(),n(11,"form",4),c("ngSubmit",function(){return o.onSubmit()}),n(12,"div",5)(13,"div",6)(14,"div",7)(15,"div",8)(16,"label",9),r(17,"Nom"),e(),a(18,"input",10),e(),n(19,"div",8)(20,"label",11),r(21,"Pr\xE9nom"),e(),a(22,"input",12),e()(),n(23,"div",13)(24,"div",8)(25,"label",14),r(26,"Date de naissance"),e(),a(27,"p-datepicker",15),e(),n(28,"div",8)(29,"label",16),r(30,"Genre"),e(),a(31,"p-select",17),e()()(),n(32,"h5"),r(33,"Informations de contact"),e(),n(34,"div",6)(35,"div",7)(36,"div",8)(37,"label",18),r(38,"Adresse"),e(),a(39,"input",19),e(),n(40,"div",8)(41,"label",20),r(42,"Adresse mail"),e(),a(43,"input",21),e(),n(44,"div",8)(45,"label",22),r(46,"Pays"),e(),a(47,"p-select",23),e()(),n(48,"div",13)(49,"div",8)(50,"label",24),r(51,"Ville"),e(),a(52,"input",25),e(),n(53,"div",8)(54,"label",26),r(55,"Adresse mail personnel"),e(),a(56,"input",27),e(),n(57,"div",8)(58,"label",28),r(59,"Num\xE9ro de t\xE9l\xE9phone"),e(),a(60,"input",29),e()()(),n(61,"h5"),r(62,"Informations additionnelles"),e(),n(63,"div",6)(64,"div",7)(65,"div",30)(66,"label",31),r(67,"Poste"),e(),a(68,"input",32),e(),n(69,"div",30)(70,"label",33),r(71,"Date d\xE9but d\u2019embauche"),e(),a(72,"p-datepicker",34),e(),n(73,"div",30)(74,"label",35),r(75,"Type de contrat"),e(),a(76,"p-select",36),e()(),n(77,"div",7)(78,"div",30)(79,"label",37),r(80,"Salaire"),e(),a(81,"input",38),e(),n(82,"div",30)(83,"label",39),r(84,"R\xF4le"),e(),a(85,"p-select",40),e(),n(86,"div",30)(87,"label",41),r(88,"D\xE9partement"),e(),a(89,"p-select",42),e()()()(),n(90,"div",43)(91,"p-button",44),c("click",function(){return o.clearForm()}),e(),a(92,"p-button",45),e()()()),t&2&&(l(3),F(h(18,rt)),l(8),m("formGroup",o.employeeForm),l(7),m("ngClass",y(19,S,o.erreurInput&&o.employeeForm.controls.lastname.errors)),l(4),m("ngClass",y(21,S,o.erreurInput&&o.employeeForm.controls.firstname.errors)),l(5),m("iconDisplay","input")("showIcon",!0),l(4),m("options",o.genres),l(12),m("ngClass",y(23,S,o.erreurInput&&o.employeeForm.controls.address_mail.errors)),l(4),m("options",o.countries),l(13),m("ngClass",y(25,S,o.erreurInput&&o.employeeForm.controls.phone.errors)),l(12),m("iconDisplay","input")("showIcon",!0),l(4),m("options",o.contrats),l(9),m("options",o.roles)("ngClass",y(27,S,o.erreurInput&&o.employeeForm.controls.role_id.errors)),l(4),m("options",o.departements),l(3),m("loading",o.loading))},dependencies:[N,M,U,z,$,J,O,P,A,q,R,L,B,j,W,le,ae,oe,ne,ie,K,ee,X],encapsulation:2})}});function ut(p,i){p&1&&(n(0,"tr")(1,"th"),r(2,"Noms"),e(),n(3,"th"),r(4,"Prenom"),e(),n(5,"th"),r(6,"T\xE9l\xE9phone"),e(),n(7,"th"),r(8,"Poste"),e(),a(9,"th"),e())}function ft(p,i){if(p&1){let t=E();n(0,"tr")(1,"td",19),r(2),e(),n(3,"td"),r(4),e(),n(5,"td"),r(6),e(),n(7,"td"),r(8),e(),n(9,"td")(10,"div",20)(11,"div")(12,"p-button",21),c("onClick",function(){let s=_(t).$implicit,g=f(2);return v(g.goToDetails(s))}),e()(),n(13,"div")(14,"p-button",22),c("click",function(s){let g=_(t).$implicit,C=f(2);return v(C.trash(s,g))}),e()()()()()}if(p&2){let t=i.$implicit;l(2),he(" ",t.lastname," "),l(2),T(t.firstname),l(2),T(t.phone),l(2),T(t.details.post),l(4),m("outlined",!0),l(2),m("outlined",!0)}}function yt(p,i){if(p&1){let t=E();n(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"p-iconfield"),a(5,"p-inputicon",12),n(6,"input",13),c("input",function(s){_(t);let g=f();return v(g.applyFilter(s))}),e()()()(),n(7,"div",14)(8,"p-button",15),c("click",function(){_(t);let s=f();return v(s.gotToAddEmployee())}),e(),n(9,"p-button",16),c("onClick",function(){_(t);let s=f();return v(s.exportCSV())}),e()()(),n(10,"div",17)(11,"p-table",18,2),I(13,ut,10,0,"ng-template",null,3,b)(15,ft,15,6,"ng-template",null,4,b),e()()()}if(p&2){let t=f();l(11),m("value",t.employees)("globalFilterFields",h(6,dt))("tableStyle",h(7,pt))("paginator",!0)("rows",40)("rowsPerPageOptions",h(8,ct))}}function _t(p,i){p&1&&(n(0,"div",23),a(1,"img",24),e())}function vt(p,i){if(p&1){let t=E();n(0,"p-fluid")(1,"form",25),c("ngSubmit",function(){_(t);let s=f();return v(s.onSubmit())}),n(2,"div",10)(3,"div")(4,"div",26)(5,"div",27)(6,"label",28),r(7,"Nom"),e(),a(8,"input",29),e(),n(9,"div",27)(10,"label",30),r(11,"Pr\xE9nom"),e(),a(12,"input",31),e()(),n(13,"div",32)(14,"div",27)(15,"label",33),r(16,"Date de naissance"),e(),a(17,"p-datepicker",34),e(),n(18,"div",27)(19,"label",35),r(20,"Genre"),e(),a(21,"p-select",36),e()()(),n(22,"h5"),r(23,"Informations de contact"),e(),n(24,"div")(25,"div",26)(26,"div",37)(27,"label",38),r(28,"Adresse"),e(),a(29,"input",39),e(),n(30,"div",37)(31,"label",40),r(32,"Adresse mail"),e(),a(33,"input",41),e(),n(34,"div",37)(35,"label",42),r(36,"Pays"),e(),a(37,"p-select",43),e()(),n(38,"div",32)(39,"div",37)(40,"label",44),r(41,"Ville"),e(),a(42,"input",45),e(),n(43,"div",37)(44,"label",46),r(45,"Adresse mail personnel"),e(),a(46,"input",47),e(),n(47,"div",37)(48,"label",48),r(49,"Num\xE9ro de t\xE9l\xE9phone"),e(),a(50,"input",49),e()()(),n(51,"h5"),r(52,"Informations additionnelles"),e(),n(53,"div")(54,"div",50)(55,"div",51)(56,"label",52),r(57,"Poste"),e(),a(58,"input",53),e(),n(59,"div",51)(60,"label",54),r(61,"Date d\xE9but d\u2019embauche"),e(),a(62,"p-datepicker",55),e(),n(63,"div",51)(64,"label",56),r(65,"Type de contrat"),e(),a(66,"p-select",57),e()(),n(67,"div",50)(68,"div",51)(69,"label",58),r(70,"Salaire"),e(),a(71,"input",59),e(),n(72,"div",51)(73,"label",60),r(74,"R\xF4le"),e(),a(75,"p-select",61),e(),n(76,"div",51)(77,"label",62),r(78,"D\xE9partement"),e(),a(79,"p-select",63),e()()()()()()}if(p&2){let t=f();l(),m("formGroup",t.employeeForm),l(7),m("ngClass",y(15,x,t.erreurInput&&t.employeeForm.controls.lastname.errors)),l(4),m("ngClass",y(17,x,t.erreurInput&&t.employeeForm.controls.firstname.errors)),l(5),m("iconDisplay","input")("showIcon",!0),l(4),m("options",t.genres),l(12),m("ngClass",y(19,x,t.erreurInput&&t.employeeForm.controls.address_mail.errors)),l(4),m("options",t.countries),l(13),m("ngClass",y(21,x,t.erreurInput&&t.employeeForm.controls.phone.errors)),l(12),m("iconDisplay","input")("showIcon",!0),l(4),m("options",t.contrats),l(9),m("options",t.roles)("ngClass",y(23,x,t.erreurInput&&t.employeeForm.controls.role_id.errors)),l(4),m("options",t.departements)}}function gt(p,i){if(p&1){let t=E();n(0,"p-button",64),c("click",function(){_(t);let s=f();return v(s.clearForm())}),e(),n(1,"p-button",65),c("click",function(){_(t);let s=f();return v(s.onSubmit())}),e()}if(p&2){let t=f();l(),m("loading",t.loading)}}var at,lt,mt,st,dt,pt,ct,x,pe,We=ue(()=>{"use strict";D();H();ve();Q();ze();Oe();me();De();ke();Te();Y();re();Le();Fe();te();xe();Be();Ie();ve();H();Le();D();Q();ke();De();me();Y();re();te();at=["dt"],lt=["op"],mt=()=>({width:"50vw","max-height":"90vh","overflow-y":"auto"}),st=()=>({"1199px":"75vw","575px":"90vw"}),dt=()=>["firstname","lastname","phone"],pt=()=>({"min-width":"75vw"}),ct=()=>[10,20,40,60],x=p=>({"ng-invalid ng-dirty":p});pe=class p{constructor(i,t,o,s,g){this.employeeService=i;this.router=t;this.confirmationService=o;this.messageService=s;this.fb=g}dt;op;employees=[];visible=!1;employeeName;employeeDetailsDialog=!1;selectedEmployees;employeeForm;erreurInput=!1;responseError;loading=!1;genres=[{name:"Masculin",code:"M"},{name:"Feminin",code:"F"}];countries=[{name:"Afrique du Sud",code:"ZA"},{name:"Alg\xE9rie",code:"DZ"},{name:"Angola",code:"AO"},{name:"B\xE9nin",code:"BJ"},{name:"Botswana",code:"BW"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cap-Vert",code:"CV"},{name:"Cameroun",code:"CM"},{name:"R\xE9publique centrafricaine",code:"CF"},{name:"Comores",code:"KM"},{name:"R\xE9publique du Congo",code:"CG"},{name:"R\xE9publique d\xE9mocratique du Congo",code:"CD"},{name:"Djibouti",code:"DJ"},{name:"\xC9gypte",code:"EG"},{name:"Guin\xE9e \xE9quatoriale",code:"GQ"},{name:"\xC9rythr\xE9e",code:"ER"},{name:"Eswatini",code:"SZ"},{name:"\xC9thiopie",code:"ET"},{name:"Gabon",code:"GA"},{name:"Gambie",code:"GM"},{name:"Ghana",code:"GH"},{name:"Guin\xE9e",code:"GN"},{name:"Guin\xE9e-Bissau",code:"GW"},{name:"C\xF4te d'Ivoire",code:"CI"},{name:"Kenya",code:"KE"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libye",code:"LY"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Mali",code:"ML"},{name:"Mauritanie",code:"MR"},{name:"Maurice",code:"MU"},{name:"Maroc",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Namibie",code:"NA"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Rwanda",code:"RW"},{name:"Sao Tom\xE9-et-Principe",code:"ST"},{name:"S\xE9n\xE9gal",code:"SN"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Somalie",code:"SO"},{name:"Soudan",code:"SD"},{name:"Soudan du Sud",code:"SS"},{name:"Tanzanie",code:"TZ"},{name:"Togo",code:"TG"},{name:"Tunisie",code:"TN"},{name:"Ouganda",code:"UG"},{name:"Zambie",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];roles=[{name:"Administrateur",code:2},{name:"Utilisateur",code:3}];contrats=[{name:"Contrat \xE0 Dur\xE9e Ind\xE9termin\xE9e",code:"cdi"},{name:"Contrat \xE0 Dur\xE9e D\xE9termin\xE9e",code:"cdd"},{name:"Contrat de Travail Temporaire",code:"interim"},{name:"Contrat de Projet ou de Mission",code:"mission"},{name:"Contrat \xE0 Temps Partiel",code:"temps_partiel"},{name:"Contrat de Travail Intermittent",code:"intermittent"},{name:"Contrat d'Apprentissage",code:"apprentissage"},{name:"Contrat de Professionnalisation",code:"professionnalisation"},{name:"Contrat de Prestation de Services",code:"freelance"},{name:"Portage Salarial",code:"portage_salarial"},{name:"Convention de Stage",code:"stage"}];departements=[{name:"Direction",code:"direction"},{name:"Ventes",code:"ventes"},{name:"Stock & Logistique",code:"stock_logistique"},{name:"Comptabilit\xE9 & Finance",code:"comptabilite"},{name:"Service Client",code:"service_client"},{name:"S\xE9curit\xE9",code:"securite"},{name:"Livraison",code:"livraison"}];employee={};ngOnInit(){this.employeeService.getAllUsers().subscribe({next:i=>{this.employees=i},error:i=>{console.error(i.error.error),this.showError(i.error.error)}}),this.employeeForm=this.fb.group({lastname:["",d.required],firstname:["",d.required],date_of_birth:[null],genre:[null],address:[""],address_mail:["",[d.email]],country:[null],city:[""],personnal_mail_address:["",[d.email]],phone:["",[d.required,d.pattern("^[0-9]+$")]],post:[""],start_date_of_hire:[null],contract_type:[null],salary:[null,d.min(0)],role_id:[null,d.required],department:[null]})}mapGenre(i){let t=this.genres.findIndex(o=>o.name===i);return t!==-1?t:0}mapCountry(i){let t=this.countries.findIndex(o=>o.name===i);return t!==-1?t:0}mapDepartment(i){let t=this.departements.findIndex(o=>o.name===i);return t!==-1?t:0}mapContractType(i){let t=this.contrats.findIndex(o=>o.name===i);return t!==-1?t:0}trash(i,t){this.confirmationService.confirm({target:i.target,message:"Voulez-vous supprimer ce employ\xE9 ?",header:"Supprimer",icon:"fa-solid fa-circle-info",rejectLabel:"annuler",rejectButtonProps:{label:"Annuler",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Confirmer",severity:"danger"},accept:()=>{this.employeeService.deleteUser(t.id).subscribe({next:()=>{this.employees=this.employees.filter(o=>o.id!==t.id),this.showSuccess("Suppression r\xE9ussie")},error:()=>{this.showError("\xC9chec de la suppression")}})},reject:()=>{this.showError("supprission annul\xE9")}})}toggle(i){this.op.toggle(i)}onSubmit(){if(this.loading=!0,this.employeeForm.valid){let i=ce(ce({},this.employee),this.employeeForm.value);this.employeeService.updateUsers(i,this.employee.id).subscribe({next:t=>{this.showSuccess("Employ\xE9 mis \xE0 jour avec succ\xE8s !"),this.loading=!1;let o=this.employees.findIndex(s=>s.id===this.employee.id);o!==-1&&(this.employees[o]=t,this.employees=[...this.employees])},error:t=>{this.showError(t.error.error),this.loading=!1}})}else this.erreurInput=!0,this.loading=!1,this.showError("Veuillez remplir tous les champs obligatoires.")}goToDetails(i){this.employee=i,this.employeeForm=this.fb.group({lastname:[i.lastname,d.required],firstname:[i.firstname,d.required],date_of_birth:[i.details?.date_of_birth?new Date(i.details.date_of_birth):null],genre:[this.genres[this.mapGenre(i.details?.genre)]||null],address:[i.details?.address||""],address_mail:[i.details?.address_mail||"",[d.email]],country:[this.countries[this.mapCountry(i.details?.country)]||null],city:[i.details?.city||""],personnal_mail_address:[i.details?.personnal_mail_address||"",[d.email]],phone:[i.phone||"",[d.required,d.pattern("^[0-9]+$")]],post:[i.details?.post||""],start_date_of_hire:[i.details?.start_date_of_hire?new Date(i.details.start_date_of_hire):null],contract_type:[this.contrats[this.mapContractType(i.details?.contract_type)]||null],salary:[i.details?.salary??0,d.min(0)],role_id:[this.roles[i.role_id-2]||null,d.required],department:[this.departements[this.mapDepartment(i.details?.department)]||null]}),this.employeeDetailsDialog=!0}applyFilter(i){let t=i.target;t&&this.dt.filterGlobal(t.value,"contains")}gotToAddEmployee(){this.router.navigate(["employees/addemployee"])}exportCSV(){this.dt.exportCSV()}showSuccess(i){this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:i})}showError(i){this.messageService.add({severity:"error",summary:"Erreur",detail:i})}clearSelectedEmployees(){this.selectedEmployees=[]}clearForm(){this.employeeForm.reset()}static \u0275fac=function(t){return new(t||p)(u(se),u(G),u(V),u(k),u(Z))};static \u0275cmp=w({type:p,selectors:[["app-employeeslist"]],viewQuery:function(t,o){if(t&1&&(fe(at,5),fe(lt,5)),t&2){let s;ye(s=_e())&&(o.dt=s.first),ye(s=_e())&&(o.op=s.first)}},features:[Se([V])],decls:8,vars:13,consts:[["content",""],["footer",""],["dt",""],["header",""],["body",""],["class","card",4,"ngIf"],["style",`
        display: flex;
        align-items: center;
        justify-content: center;
        height: 89vh;
    `,4,"ngIf"],[3,"visibleChange","onHide","header","visible","modal","breakpoints","resizable"],[1,"card"],[1,"flex","justify-between","gap-4"],[1,"w-full"],[1,"flex","items-center","justify-between"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Rechercher un fournisseur...",3,"input"],[1,"flex","gap-4"],["label","Ajouter","icon","fa-solid fa-plus","severity","contrast",3,"click"],["label","Exporter","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"mt-4"],["selectionMode","single","dataKey","id",3,"value","globalFilterFields","tableStyle","paginator","rows","rowsPerPageOptions"],[1,"name-td"],[2,"display","flex","gap","1rem"],["label","","severity","info","icon","fa-solid fa-pencil",3,"onClick","outlined"],["label","","severity","danger","icon","fa-solid fa-trash-can",3,"click","outlined"],[2,"display","flex","align-items","center","justify-content","center","height","89vh"],["src","img/No data-rafiki.svg","alt","",2,"width","35rem"],["action","",1,"w-full","mt-4",3,"ngSubmit","formGroup"],[1,"flex","flex-col","md:flex-row","gap-6","w-full"],[1,"flex","flex-wrap","gap-2","w-full"],["for","lastname"],["pInputText","","type","text","formControlName","lastname",3,"ngClass"],["for","firstname"],["pInputText","","type","text","formControlName","firstname",3,"ngClass"],[1,"flex","flex-col","md:flex-row","gap-6","w-full","mt-6"],["for","date_of_birth"],["formControlName","date_of_birth","inputId","icondisplay",1,"w-full",3,"iconDisplay","showIcon"],["for","genre"],["formControlName","genre","optionLabel","name",1,"w-full",3,"options"],[1,"flex","flex-wrap","gap-2","w-full",2,"width","180px","min-width","180px","max-width","180px"],["for","address"],["pInputText","","type","text","formControlName","address"],["for","address_mail"],["pInputText","","type","email","formControlName","address_mail",3,"ngClass"],["for","country"],["formControlName","country","optionLabel","name",1,"w-full",3,"options"],["for","city"],["pInputText","","type","text","formControlName","city"],["for","personnal_mail_address"],["pInputText","","type","email","formControlName","personnal_mail_address"],["for","phone"],["pInputText","","type","tel","formControlName","phone",3,"ngClass"],[1,"flex","flex-col","md:flex-row","flex-wrap","gap-6","w-full"],[1,"flex","flex-col","gap-2","mt-6",2,"width","180px","min-width","180px","max-width","180px"],["for","post"],["pInputText","","type","text","formControlName","post"],["for","start_date_of_hire"],["formControlName","start_date_of_hire","inputId","icondisplay",1,"w-full",3,"iconDisplay","showIcon"],["for","contract_type"],["formControlName","contract_type","optionLabel","name",1,"w-full",3,"options"],["for","salary"],["pInputText","","type","number","formControlName","salary"],["for","role_id"],["formControlName","role_id","optionLabel","name",1,"w-full",3,"options","ngClass"],["for","department"],["formControlName","department","optionLabel","name",1,"w-full",3,"options"],["label","Vider","icon","pi pi-times","severity","danger","outlined","",3,"click"],["type","submit","label","Enregister","icon","pi pi-save","severity","contrast",3,"click","loading"]],template:function(t,o){if(t&1){let s=E();I(0,yt,17,9,"div",5)(1,_t,2,0,"div",6),a(2,"p-confirmdialog"),n(3,"p-dialog",7),be("visibleChange",function(C){return _(s),Ce(o.employeeDetailsDialog,C)||(o.employeeDetailsDialog=C),v(C)}),c("onHide",function(){return _(s),v(o.clearSelectedEmployees())}),I(4,vt,80,25,"ng-template",null,0,b)(6,gt,2,1,"ng-template",null,1,b),e()}t&2&&(m("ngIf",o.employees.length>0),l(),m("ngIf",o.employees.length<=0),l(2),F(h(11,mt)),ge("header","Details du fournisseur ",o.employee.name,""),Ee("visible",o.employeeDetailsDialog),m("modal",!0)("breakpoints",h(12,st))("resizable",!1)("modal",!0))},dependencies:[Re,Ae,N,M,we,U,z,je,Pe,Ve,Ge,Ne,Me,le,ae,$,J,ie,oe,ne,W,P,A,q,R,L,O,B,j,K,ee,X],encapsulation:2})}});var ri,ht=ue(()=>{Ze();We();ri=[{path:"addemployee",component:de},{path:"employeeslist",component:pe}]});ht();export{ri as default};
