import{a as de,b as ot}from"./chunk-CFA2N6T3.js";import{a as pe,b as rt}from"./chunk-EGDRS6EX.js";import{a as lt,b as vt}from"./chunk-QZFPSUB7.js";import{a as ae,b as se,c as me}from"./chunk-RUXIFF5Z.js";import{A as tt,B as it,C as le,D as nt,h as ie,i as Qe,j as Ue,k as We,l as Ke,m as Ye,n as Je,o as Xe,t as ne,u as re,v as oe,w as Ze,z as et}from"./chunk-NODLAXFO.js";import{$a as ft,Da as Be,Ea as ut,Ja as $,Ka as f,La as Oe,Ma as z,Na as A,Oa as Le,Pa as P,Ra as H,Ua as B,Va as O,Wa as L,Xa as G,Ya as Q,Za as E,_a as Ge,fc as U,gc as W,hc as K,m as D,mc as Y,na as q,nc as J,oc as X,pc as Z,qc as ee,ra as j,rc as te,t as He,ya as we}from"./chunk-OZDOVG45.js";import{Cb as b,Db as d,Dc as V,Eb as u,Fc as Pe,Hb as qe,Ib as je,Kb as _e,Lb as ye,Lc as k,Mb as be,Qb as a,Ra as m,Rb as Ce,Rc as R,Sb as Se,U as Ie,Ub as $e,V as Fe,Vb as ze,Wa as c,Wb as Ae,Xb as T,Yb as y,Zb as x,_ as Ne,a as xe,ab as F,bb as Ve,cb as ke,d as I,ea as g,eb as Re,fa as h,fb as C,ia as Te,ic as S,mc as Ee,nb as p,oa as Me,pb as De,qb as N,sc as M,wb as o,xb as i,yb as s}from"./chunk-6FTOFNHU.js";var gt,ht,at,ce,ue,w=I(()=>{"use strict";M();M();ft();ut();E();gt=({dt:t})=>`
.p-textarea {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: ${t("textarea.color")};
    background: ${t("textarea.background")};
    padding: ${t("textarea.padding.y")} ${t("textarea.padding.x")};
    border: 1px solid ${t("textarea.border.color")};
    transition: background ${t("textarea.transition.duration")}, color ${t("textarea.transition.duration")}, border-color ${t("textarea.transition.duration")}, outline-color ${t("textarea.transition.duration")}, box-shadow ${t("textarea.transition.duration")};
    appearance: none;
    border-radius: ${t("textarea.border.radius")};
    outline-color: transparent;
    box-shadow: ${t("textarea.shadow")};
}

.p-textarea.ng-invalid.ng-dirty {
    border-color: ${t("textarea.invalid.border.color")};
}

.p-textarea:enabled:hover {
    border-color: ${t("textarea.hover.border.color")};
}

.p-textarea:enabled:focus {
    border-color: ${t("textarea.focus.border.color")};
    box-shadow: ${t("textarea.focus.ring.shadow")};
    outline: ${t("textarea.focus.ring.width")} ${t("textarea.focus.ring.style")} ${t("textarea.focus.ring.color")};
    outline-offset: ${t("textarea.focus.ring.offset")};
}

.p-textarea.p-invalid {
    border-color: ${t("textarea.invalid.border.color")};
}

.p-textarea.p-variant-filled {
    background: ${t("textarea.filled.background")};
}

.p-textarea.p-variant-filled:enabled:focus {
    background: ${t("textarea.filled.focus.background")};
}

.p-textarea:disabled {
    opacity: 1;
    background: ${t("textarea.disabled.background")};
    color: ${t("textarea.disabled.color")};
}

.p-textarea::placeholder {
    color: ${t("textarea.placeholder.color")};
}

.p-textarea.ng-invalid.ng-dirty::placeholder {
    color: ${t("textarea.invalid.placeholder.color")};
}

.p-textarea-fluid {
    width: 100%;
}

.p-textarea-resizable {
    overflow: hidden;
    resize: none;
}

.p-textarea-sm {
    font-size: ${t("textarea.sm.font.size")};
    padding-block: ${t("textarea.sm.padding.y")};
    padding-inline: ${t("textarea.sm.padding.x")};
}

.p-textarea-lg {
    font-size: ${t("textarea.lg.font.size")};
    padding-block: ${t("textarea.lg.padding.y")};
    padding-inline: ${t("textarea.lg.padding.x")};
}
`,ht={root:({instance:t,props:n})=>["p-textarea p-component",{"p-filled":t.filled,"p-textarea-resizable ":n.autoResize,"p-invalid":n.invalid,"p-variant-filled":n.variant?n.variant==="filled":t.config.inputStyle==="filled"||t.config.inputVariant==="filled","p-textarea-fluid":n.fluid}]},at=(()=>{class t extends Be{name="textarea";theme=gt;classes=ht;static \u0275fac=(()=>{let e;return function(l){return(e||(e=Te(t)))(l||t)}})();static \u0275prov=Ie({token:t,factory:t.\u0275fac})}return t})(),ce=(()=>{class t extends Ge{ngModel;control;autoResize;variant;fluid=!1;pSize;onResize=new Me;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;_componentStyle=Ne(at);constructor(e,r){super(),this.ngModel=e,this.control=r}ngOnInit(){super.ngOnInit(),this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}get hasFluid(){let r=this.el.nativeElement.closest("p-fluid");return this.fluid||!!r}ngAfterViewInit(){super.ngAfterViewInit(),this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe(),super.ngOnDestroy()}static \u0275fac=function(r){return new(r||t)(c(Le,8),c(Oe,8))};static \u0275dir=ke({type:t,selectors:[["","pTextarea",""]],hostAttrs:[1,"p-textarea","p-component"],hostVars:16,hostBindings:function(r,l){r&1&&d("input",function(_){return l.onInput(_)}),r&2&&De("p-filled",l.filled)("p-textarea-resizable",l.autoResize)("p-variant-filled",l.variant==="filled"||l.config.inputStyle()==="filled"||l.config.inputVariant()==="filled")("p-textarea-fluid",l.hasFluid)("p-textarea-sm",l.pSize==="small")("p-inputfield-sm",l.pSize==="small")("p-textarea-lg",l.pSize==="large")("p-inputfield-lg",l.pSize==="large")},inputs:{autoResize:[2,"autoResize","autoResize",Ee],variant:"variant",fluid:[2,"fluid","fluid",Ee],pSize:"pSize"},outputs:{onResize:"onResize"},features:[T([at]),Re]})}return t})(),ue=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ve({type:t});static \u0275inj=Fe({})}return t})()});var Tt,fe,ve,dt=I(()=>{"use strict";E();K();me();te();oe();nt();Qe();w();R();X();M();He();E();we();rt();ot();R();te();K();w();me();oe();X();Tt=()=>({height:"100%",width:"3.5rem"}),fe=t=>({"ng-invalid ng-dirty":t}),ve=class t{constructor(n,e,r,l,v){this.router=n;this.fb=e;this.messageService=r;this.clientService=l;this.employeeService=v;this.clientForm=this.fb.group({name:["",f.required],representant:["",f.required],principal_address:[""],email:[""],phone:["",f.required],specific_price:[""],payment_requirement:[""],payment_method:["",f.required],facturation_address:[""],nc:[""],notes:[""],tva:[!0],precompte:[!1]})}clientForm;erreurInput=!1;responseError;loading=!1;payment_methods=[{name:"Orange Money",code:"OM"},{name:"MTN Money",code:"MTN"},{name:"Virement",code:"VIR"},{name:"Esp\xE8ce",code:"ESP"},{name:"Ch\xE8que",code:"CHQ"}];payment_requirements=[{name:"\xC0 la commande",code:"CMD"},{name:"\xC0 la livraison",code:"LIV"},{name:"Net 7 jours",code:"N7"},{name:"Net 15 jours",code:"N15"},{name:"Net 30 jours",code:"N30"},{name:"Paiement \xE9chelonn\xE9",code:"ECH"}];employees=[];ngOnInit(){this.employeeService.getAllUsers().subscribe({next:n=>{this.employees=n},error:n=>{this.showError("Erreur lors de la r\xE9cup\xE9ration des employ\xE9s")}})}onSubmit(){this.clientForm.invalid?(this.erreurInput=!0,this.showError("Veuillez remplir tous les champs obligatoires.")):(this.erreurInput=!1,this.loading=!0,this.clientService.addCient(this.clientForm.value).subscribe({next:()=>{this.showSuccess("Client ajout\xE9 avec succ\xE8s")},error:n=>{this.showError("Erreur lors de l'ajout du client"),console.error(n.error.error),this.loading=!1},complete:()=>{this.loading=!1}}))}showSuccess(n){this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:n})}showError(n){this.messageService.add({severity:"error",summary:"Erreur",detail:n})}clearForm(){this.clientForm.reset()}goToClientList(){this.router.navigate(["clients/clientslist"])}static \u0275fac=function(e){return new(e||t)(c(D),c(L),c(j),c(pe),c(de))};static \u0275cmp=F({type:t,selectors:[["app-addclient"]],decls:74,vars:20,consts:[[1,"flex","gap-4","mb-12"],["icon","pi pi-arrow-left","severity","contrast",1,"text-xl",3,"click"],[1,"text-xl"],[1,"text-2xl","font-bold","text-primary"],["action","",1,"w-full","mt-4",3,"ngSubmit","formGroup"],[1,"w-full","mt-4","card"],[1,"flex","flex-col","md:flex-row","gap-6","w-full"],[1,"flex","flex-wrap","gap-2","w-full"],["for","nc"],["pInputText","","type","text","id","nc","name","nc","formControlName","nc"],["for","name"],["pInputText","","type","text","id","name","name","name","formControlName","name","required","",3,"ngClass"],[1,"flex","mt-6","flex-col","md:flex-row","gap-6","w-full"],["for",""],["formControlName","representant","id","representant","name","representant","optionLabel","lastname","required","",1,"w-full",3,"options","ngClass"],["pInputText","","type","text","id","principal_address","name","principal_address","formControlName","principal_address"],["pInputText","","type","text","id","email","name","email","formControlName","email"],["pInputText","","type","text","id","phone","name","phone","formControlName","phone","required","",3,"ngClass"],["formControlName","payment_method","optionLabel","name","required","",1,"w-full",3,"options","ngClass"],["pInputText","","type","text","id","specific_price","name","specific_price","formControlName","specific_price"],["formControlName","payment_requirement","optionLabel","name",1,"w-full",3,"options"],["for","facturation_address"],["pInputText","","type","text","id","facturation_address","name","facturation_address","formControlName","facturation_address"],[1,"flex","flex-col","mt-6","md:flex-row","gap-6","w-full"],["rows","5","cols","30","pTextarea","","formControlName","notes"],[1,"flex","flex-wrap","mt-6","gap-2","w-full"],["id","tva","binary","true","formControlName","tva"],["for","tva"],["id","precompte","binary","true","formControlName","precompte"],["for","precompte"],[1,"flex","flex-wrap","gap-4","mb-6","mt-6"],["label","Vider","icon","pi pi-times","severity","danger","outlined","",3,"click"],["type","submit","label","Enregister","icon","pi pi-save","severity","contrast",3,"loading"]],template:function(e,r){e&1&&(o(0,"p-fluid")(1,"div",0)(2,"div")(3,"p-button",1),d("click",function(){return r.goToClientList()}),i()(),o(4,"div")(5,"div")(6,"span",2),a(7,"Retourner \xE0 la liste des clients"),i()(),o(8,"div")(9,"span",3),a(10,"Enregistrer un client"),i()()()(),o(11,"form",4),d("ngSubmit",function(){return r.onSubmit()}),o(12,"div",5)(13,"div",6)(14,"div",7)(15,"label",8),a(16,"NC/NIU"),i(),s(17,"input",9),i(),o(18,"div",7)(19,"label",10),a(20,"Nom"),i(),s(21,"input",11),i()(),o(22,"div",12)(23,"div",7)(24,"label",13),a(25,"Representant"),i(),s(26,"p-select",14),i(),o(27,"div",7)(28,"label",13),a(29,"Adresse principale"),i(),s(30,"input",15),i()(),o(31,"div",12)(32,"div",7)(33,"label",13),a(34,"Email"),i(),s(35,"input",16),i(),o(36,"div",7)(37,"label",13),a(38,"T\xE9l\xE9phone"),i(),s(39,"input",17),i()(),o(40,"div",12)(41,"div",7)(42,"label",13),a(43,"M\xE9thode de paiement"),i(),s(44,"p-select",18),i(),o(45,"div",7)(46,"label",13),a(47,"% Reduction"),i(),s(48,"input",19),i()(),o(49,"div",12)(50,"div",7)(51,"label",13),a(52,"Conditions de paiement"),i(),s(53,"p-select",20),i(),o(54,"div",7)(55,"label",21),a(56,"Adresse de facturation"),i(),s(57,"input",22),i()(),o(58,"div",23)(59,"div",7)(60,"label",13),a(61,"Notes"),i(),s(62,"textarea",24),i()(),o(63,"div",25),s(64,"p-checkbox",26),o(65,"label",27),a(66,"Avec TVA"),i()(),o(67,"div",25),s(68,"p-checkbox",28),o(69,"label",29),a(70,"Avec PRECOMPTE"),i()()(),o(71,"div",30)(72,"p-button",31),d("click",function(){return r.clearForm()}),i(),s(73,"p-button",32),i()()()),e&2&&(m(3),N(y(11,Tt)),m(8),p("formGroup",r.clientForm),m(10),p("ngClass",x(12,fe,r.erreurInput&&r.clientForm.controls.name.errors)),m(5),p("options",r.employees)("ngClass",x(14,fe,r.erreurInput&&r.clientForm.controls.representant.errors)),m(13),p("ngClass",x(16,fe,r.erreurInput&&r.clientForm.controls.phone.errors)),m(5),p("options",r.payment_methods)("ngClass",x(18,fe,r.erreurInput&&r.clientForm.controls.payment_method.errors)),m(9),p("options",r.payment_requirements),m(20),p("loading",r.loading))},dependencies:[k,V,ee,Z,W,U,Q,P,$,z,A,O,H,B,G,ue,ce,se,ae,re,ne,ie,le,J,Y],encapsulation:2})}});function $t(t,n){t&1&&(o(0,"tr")(1,"th"),a(2,"Noms"),i(),o(3,"th"),a(4,"Repr\xE9sentants"),i(),o(5,"th"),a(6,"Conditions de paiement"),i(),o(7,"th"),a(8,"M\xE9thode de paiement"),i(),o(9,"th"),a(10,"T\xE9l\xE9phone"),i(),s(11,"th"),i())}function zt(t,n){if(t&1){let e=b();o(0,"tr")(1,"td",21),a(2),i(),o(3,"td")(4,"p-button",22),d("click",function(){let l=g(e).$implicit,v=u(2);return h(v.goToEmplyeeDetails(l.representant))}),i()(),o(5,"td"),a(6),i(),o(7,"td"),a(8),i(),o(9,"td"),a(10),i(),o(11,"td")(12,"div",23)(13,"div")(14,"p-button",24),d("onClick",function(){let l=g(e).$implicit,v=u(2);return h(v.goToDetails(l))}),i()(),o(15,"div")(16,"p-button",25),d("click",function(l){let v=g(e).$implicit,_=u(2);return h(_.trash(l,v))}),i()()()()()}if(t&2){let e=n.$implicit,r=u(2);m(2),Se(" ",e.name," "),m(2),qe("label",r.getEmployeeName(e.representant)),m(2),Ce(e.payment_requirement),m(2),Se(" ",e.payment_method," "),m(2),Ce(e.phone),m(4),p("outlined",!0),m(2),p("outlined",!0)}}function At(t,n){t&1&&(o(0,"div",26),s(1,"img",27),i())}function Pt(t,n){if(t&1){let e=b();o(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"p-iconfield"),s(5,"p-inputicon",13),o(6,"input",14),d("input",function(l){g(e);let v=u();return h(v.applyFilter(l))}),i()()()(),o(7,"div",15)(8,"p-button",16),d("click",function(){g(e);let l=u();return h(l.gotToAddClient())}),i(),o(9,"p-button",17),d("onClick",function(){g(e);let l=u();return h(l.exportCSV())}),i()()(),o(10,"div",18)(11,"p-table",19,2),C(13,$t,12,0,"ng-template",null,3,S)(15,zt,17,7,"ng-template",null,4,S),i()(),C(17,At,2,0,"div",20),i()}if(t&2){let e=u();m(11),p("value",e.clients)("globalFilterFields",y(7,Dt))("tableStyle",y(8,qt))("paginator",!0)("rows",40)("rowsPerPageOptions",y(9,jt)),m(6),p("ngIf",e.clients.length<=0)}}function Ht(t,n){t&1&&(o(0,"div",26),s(1,"img",28),i())}function Bt(t,n){if(t&1){let e=b();o(0,"p-fluid")(1,"form",29),d("ngSubmit",function(){g(e);let l=u();return h(l.onSubmit())}),o(2,"div",30)(3,"div",31)(4,"div",32)(5,"label",33),a(6,"NC/NIU"),i(),s(7,"input",34),i(),o(8,"div",32)(9,"label",35),a(10,"Nom"),i(),s(11,"input",36),i()(),o(12,"div",37)(13,"div",32)(14,"label",38),a(15,"Representant"),i(),s(16,"p-select",39),i(),o(17,"div",32)(18,"label",38),a(19,"Adresse principale"),i(),s(20,"input",40),i()(),o(21,"div",41)(22,"div",32)(23,"label",38),a(24,"Email"),i(),s(25,"input",42),i(),o(26,"div",32)(27,"label",38),a(28,"T\xE9l\xE9phone"),i(),s(29,"input",43),i()(),o(30,"div",41)(31,"div",32)(32,"label",38),a(33,"M\xE9thode de paiement"),i(),s(34,"p-select",44),i(),o(35,"div",32)(36,"label",38),a(37,"% Reduction"),i(),s(38,"input",45),i()(),o(39,"div",41)(40,"div",32)(41,"label",38),a(42,"Conditions de paiement"),i(),s(43,"p-select",46),i(),o(44,"div",32)(45,"label",38),a(46,"Adresse de facturation"),i(),s(47,"input",47),i()(),o(48,"div",48)(49,"div",32)(50,"label",38),a(51,"Notes"),i(),s(52,"textarea",49),i()(),o(53,"div",50),s(54,"p-checkbox",51),o(55,"label",52),a(56,"Avec TVA"),i()(),o(57,"div",50),s(58,"p-checkbox",53),o(59,"label",54),a(60,"Avec PRECOMPTE"),i()()()()()}if(t&2){let e=u();m(),p("formGroup",e.clientForm),m(10),p("ngClass",x(8,ge,e.erreurInput&&e.clientForm.controls.name.errors)),m(5),p("options",e.employees)("ngClass",x(10,ge,e.erreurInput&&e.clientForm.controls.representant.errors)),m(13),p("ngClass",x(12,ge,e.erreurInput&&e.clientForm.controls.phone.errors)),m(5),p("options",e.payment_methods)("ngClass",x(14,ge,e.erreurInput&&e.clientForm.controls.payment_method.errors)),m(9),p("options",e.payment_requirements)}}function Ot(t,n){if(t&1){let e=b();o(0,"p-button",55),d("click",function(){g(e);let l=u();return h(l.clearForm())}),i(),o(1,"p-button",56),d("click",function(){g(e);let l=u();return h(l.onSubmit())}),i()}if(t&2){let e=u();m(),p("loading",e.loading)}}var Mt,Vt,kt,Rt,Dt,qt,jt,ge,he,ct=I(()=>{"use strict";E();we();tt();R();K();vt();nt();me();Ke();Xe();Qe();te();oe();X();w();M();rt();ot();He();we();E();tt();R();K();Xe();Ke();me();te();oe();X();w();Mt=["dt"],Vt=["op"],kt=()=>({width:"50vw","max-height":"90vh","overflow-y":"auto"}),Rt=()=>({"1199px":"75vw","575px":"90vw"}),Dt=()=>["name","representant","specific_price","phone","payment_method","payment_requirement"],qt=()=>({"min-width":"75vw"}),jt=()=>[10,20,40,60],ge=t=>({"ng-invalid ng-dirty":t});he=class t{constructor(n,e,r,l,v,_){this.clientService=n;this.employeeService=e;this.router=r;this.confirmationService=l;this.messageService=v;this.fb=_}dt;op;clients=[];employees=[];selectedClientsProducts=[];visible=!1;clientName;clientDetailsDialog=!1;clientForm;erreurInput=!1;responseError;loading=!1;status=[{name:"Active",code:"0"},{name:"Inactive",code:"1"}];payment_methods=[{name:"Orange Money",code:"OM"},{name:"MTN Money",code:"MTN"},{name:"Virement",code:"VIR"},{name:"Esp\xE8ce",code:"ESP"},{name:"Ch\xE8que",code:"CHQ"}];payment_requirements=[{name:"\xC0 la commande",code:"CMD"},{name:"\xC0 la livraison",code:"LIV"},{name:"Net 7 jours",code:"N7"},{name:"Net 15 jours",code:"N15"},{name:"Net 30 jours",code:"N30"},{name:"Paiement \xE9chelonn\xE9",code:"ECH"}];client={};ngOnInit(){this.clientService.getAllClients().subscribe({next:n=>{this.clients=n},error:n=>{this.showError(n.error.error)}}),this.employeeService.getAllUsers().subscribe({next:n=>{this.employees=n},error:n=>{this.showError(n.error.error)}}),this.clientForm=this.fb.group({name:["",f.required],representant:["",f.required],principal_address:[""],email:[""],phone:["",f.required],specific_price:[""],payment_requirement:[""],payment_method:["",f.required],facturation_address:[""],notes:[""],tva:[!1],ecomp:[!1]})}goToDetails(n){this.client=n,this.clientDetailsDialog=!0,this.clientForm=this.fb.group({name:[n.name,f.required],nc:[n.nc],representant:[this.mapEmployee(n.representant)||null,f.required],principal_address:[n.principal_address],email:[n.email],phone:[n.phone,f.required],specific_price:[n.specific_price*100],payment_requirement:[this.payment_requirements[this.mapPayment_requirement(n.payment_requirement)]||null],payment_method:[this.payment_methods[this.mapPaymentMethod(n.payment_method)]||null],facturation_address:[n.facturation_address],notes:[n.notes],tva:[n.assujetti_tva],precompte:[n.concern_precompte]})}goToEmplyeeDetails(n){this.showSuccess("D\xE9tails de l'employ\xE9  "+n)}mapEmployee(n){return this.employees.find(e=>e.id===n)||null}mapPayment_requirement(n){let e=this.payment_requirements.findIndex(r=>r.name===n);return e!==-1?e:0}mapPaymentMethod(n){let e=this.payment_methods.findIndex(r=>r.name===n);return e!==-1?e:0}getEmployeeName(n){let e=this.employees.find(r=>r.id===n);return e?`${e.firstname} ${e.lastname}`:"N/A"}gotToAddClient(){this.router.navigate(["clients/addclient"])}trash(n,e){this.confirmationService.confirm({target:n.target,message:"Voulez-vous supprimer ce client ?",header:"Supprimer",icon:"fa-solid fa-circle-info",rejectLabel:"annuler",rejectButtonProps:{label:"Annuler",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Confirmer",severity:"danger"},accept:()=>{this.clientService.deleteCient(e.id).subscribe({next:()=>{this.clients=this.clients.filter(r=>r.id!==e.id),this.showSuccess("Suppression r\xE9ussie")},error:()=>{this.showError("\xC9chec de la suppression")}})},reject:()=>{this.showError("supprission annul\xE9")}})}toggle(n){this.op.toggle(n)}onSubmit(){if(this.loading=!0,this.clientForm.valid){let n=xe(xe({},this.client),this.clientForm.value);this.clientService.updateCient(n,this.client.id).subscribe({next:e=>{this.showSuccess("Client mis \xE0 jour avec succ\xE8s !"),this.loading=!1;let r=this.clients.findIndex(l=>l.id===this.client.id);r!==-1&&(this.clients[r]=e,this.clients=[...this.clients])},error:e=>{this.showError(e.error.error),this.loading=!1}})}else this.erreurInput=!0,this.loading=!1,this.showError("Veuillez remplir tous les champs obligatoires.")}applyFilter(n){let e=n.target;e&&this.dt.filterGlobal(e.value,"contains")}gotToAddEmployees(){this.router.navigate(["employees/addclient"])}exportCSV(){this.dt.exportCSV()}showSuccess(n){this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:n})}showError(n){this.messageService.add({severity:"error",summary:"Erreur",detail:n})}clearForm(){this.clientForm.reset()}clearSelectedClient(){this.selectedClientsProducts=[]}static \u0275fac=function(e){return new(e||t)(c(pe),c(de),c(D),c(q),c(j),c(L))};static \u0275cmp=F({type:t,selectors:[["app-clientslist"]],viewQuery:function(e,r){if(e&1&&(_e(Mt,5),_e(Vt,5)),e&2){let l;ye(l=be())&&(r.dt=l.first),ye(l=be())&&(r.op=l.first)}},features:[T([q])],decls:9,vars:13,consts:[["content",""],["footer",""],["dt",""],["header",""],["body",""],[1,""],["class","card",4,"ngIf"],["style",`
            display: flex;
            align-items: center;
            justify-content: center;
            height: 89vh;
        `,4,"ngIf"],[3,"visibleChange","onHide","header","visible","modal","breakpoints","resizable"],[1,"card"],[1,"flex","justify-between","gap-4"],[1,"w-full"],[1,"flex","items-center","justify-between"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Rechercher un client...",3,"input"],[1,"flex","gap-4"],["label","Ajouter","icon","fa-solid fa-plus","severity","contrast",3,"click"],["label","Exporter","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"mt-4"],["selectionMode","single","dataKey","id",3,"value","globalFilterFields","tableStyle","paginator","rows","rowsPerPageOptions"],["style",`
                display: flex;
                align-items: center;
                justify-content: center;
                height: 89vh;
            `,4,"ngIf"],[1,"name-td"],["severity","info","text","",3,"click","label"],[2,"display","flex","gap","1rem"],["label","","severity","info","icon","fa-solid fa-pencil",3,"onClick","outlined"],["label","","severity","danger","icon","fa-solid fa-trash-can",3,"click","outlined"],[2,"display","flex","align-items","center","justify-content","center","height","89vh"],["src","img/No data-rafiki.svg","alt","",2,"width","26rem"],["src","img/No data-rafiki.svg","alt","",2,"width","35rem"],["action","",1,"w-full","mt-4",3,"ngSubmit","formGroup"],[1,"w-full","mt-4","card"],[1,"flex","flex-col","md:flex-row","gap-6","w-full"],[1,"flex","flex-wrap","gap-2","w-full"],["for","nc"],["pInputText","","type","text","id","nc","name","nc","formControlName","nc"],["for","name"],["pInputText","","type","text","id","name","name","name","formControlName","name","required","",3,"ngClass"],[1,"flex","flex-col","md:flex-row","mt-4","gap-6","w-full"],["for",""],["formControlName","representant","id","representant","name","representant","optionLabel","lastname","required","",1,"w-full",3,"options","ngClass"],["pInputText","","type","text","id","principal_address","name","principal_address","formControlName","principal_address"],[1,"flex","mt-6","flex-col","md:flex-row","gap-6","w-full"],["pInputText","","type","text","id","email","name","email","formControlName","email"],["pInputText","","type","text","id","phone","name","phone","formControlName","phone","required","",3,"ngClass"],["formControlName","payment_method","optionLabel","name","required","",1,"w-full",3,"options","ngClass"],["pInputText","","type","text","id","specific_price","name","specific_price","formControlName","specific_price"],["formControlName","payment_requirement","optionLabel","name",1,"w-full",3,"options"],["pInputText","","type","text","id","facturation_address","name","facturation_address","formControlName","facturation_address"],[1,"flex","flex-col","mt-6","md:flex-row","gap-6","w-full"],["rows","5","cols","30","pTextarea","","formControlName","notes"],[1,"flex","flex-wrap","mt-6","gap-2","w-full"],["id","tva","binary","true","formControlName","tva"],["for","tva"],["id","precompte","binary","true","formControlName","precompte"],["for","precompte"],["label","Vider","icon","pi pi-times","severity","danger","outlined","",3,"click"],["type","submit","label","Enregister","icon","pi pi-save","severity","contrast",3,"click","loading"]],template:function(e,r){if(e&1){let l=b();o(0,"div",5),C(1,Pt,18,10,"div",6)(2,Ht,2,0,"div",7),s(3,"p-confirmdialog"),o(4,"p-dialog",8),Ae("visibleChange",function(_){return g(l),ze(r.clientDetailsDialog,_)||(r.clientDetailsDialog=_),h(_)}),d("onHide",function(){return g(l),h(r.clearSelectedClient())}),C(5,Bt,61,16,"ng-template",null,0,S)(7,Ot,2,1,"ng-template",null,1,S),i()()}e&2&&(m(),p("ngIf",r.clients.length>0),m(),p("ngIf",r.clients.length<=0),m(2),N(y(11,kt)),je("header","Details du client ",r.client.name,""),$e("visible",r.clientDetailsDialog),p("modal",!0)("breakpoints",y(12,Rt))("resizable",!1)("modal",!0))},dependencies:[et,Ze,k,V,Pe,W,U,lt,it,Je,Ye,We,Ue,se,ae,ee,Z,ie,re,ne,G,P,$,z,A,O,Q,H,B,le,J,Y,ue,ce],encapsulation:2})}});var Bi,Lt=I(()=>{dt();ct();Bi=[{path:"addclient",component:ve},{path:"clientslist",component:he}]});Lt();export{Bi as default};
