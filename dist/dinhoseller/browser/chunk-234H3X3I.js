import{a as ce,b as at,c as de,d as st}from"./chunk-VINRXG6G.js";import{a as ae,b as se,c as me,d as ot,e as pe,f as lt,i as mt,j as xt}from"./chunk-J743F2QU.js";import{h as ne,i as Ke,j as Ye,k as Je,l as Xe,m as Ze,n as et,o as tt,p as re,q as oe,r as le,s as it,v as nt,w as rt}from"./chunk-PHNKNGKI.js";import{$b as U,Da as z,Ea as f,Fa as Qe,Ga as A,Ha as P,Ia as We,Ja as H,La as B,Oa as O,Pa as L,Qa as G,Ra as Q,Sa as W,Ta as E,Ua as Ue,Va as ht,ac as K,bc as Y,gc as J,hc as X,ia as j,ic as Z,jc as ee,kc as te,l as q,lc as ie,ma as $,s as Le,sa as we,xa as Ge,ya as gt}from"./chunk-MJGBYBNV.js";import{k,m as Be,p as Oe,r as R,x as D}from"./chunk-GCAJPEYL.js";import{$a as F,Bb as b,Eb as c,Fb as u,Ib as qe,Jb as je,Lb as ye,Mb as be,Nb as Ce,Qa as m,Rb as a,Sb as Se,T as Ie,Tb as T,U as Fe,Va as d,Vb as $e,Wb as ze,Xb as Ae,Yb as N,Z as Me,Zb as y,_b as x,a as _e,ab as Ve,bb as ke,d as I,da as g,db as Re,ea as h,eb as C,gc as Pe,ha as Te,ic as He,jc as S,mb as p,na as Ne,ob as De,pb as M,rc as Ee,vb as o,wb as i,xb as s,xc as V}from"./chunk-PHRQPCRV.js";var _t,yt,pt,ue,fe,w=I(()=>{"use strict";V();V();ht();gt();E();_t=({dt:t})=>`
.p-textarea {
    font-family: inherit;
    font-feature-settings: inherit;
    font-size: 1rem;
    color: ${t("textarea.color")};
    background: ${t("textarea.background")};
    padding: ${t("textarea.padding.y")} ${t("textarea.padding.x")};
    border: 1px solid ${t("textarea.border.color")};
    transition: background ${t("textarea.transition.duration")}, color ${t("textarea.transition.duration")}, border-color ${t("textarea.transition.duration")}, outline-color ${t("textarea.transition.duration")}, box-shadow ${t("textarea.transition.duration")};
    appearance: none;
    border-radius: ${t("textarea.border.radius")};
    outline-color: transparent;
    box-shadow: ${t("textarea.shadow")};
}

.p-textarea.ng-invalid.ng-dirty {
    border-color: ${t("textarea.invalid.border.color")};
}

.p-textarea:enabled:hover {
    border-color: ${t("textarea.hover.border.color")};
}

.p-textarea:enabled:focus {
    border-color: ${t("textarea.focus.border.color")};
    box-shadow: ${t("textarea.focus.ring.shadow")};
    outline: ${t("textarea.focus.ring.width")} ${t("textarea.focus.ring.style")} ${t("textarea.focus.ring.color")};
    outline-offset: ${t("textarea.focus.ring.offset")};
}

.p-textarea.p-invalid {
    border-color: ${t("textarea.invalid.border.color")};
}

.p-textarea.p-variant-filled {
    background: ${t("textarea.filled.background")};
}

.p-textarea.p-variant-filled:enabled:focus {
    background: ${t("textarea.filled.focus.background")};
}

.p-textarea:disabled {
    opacity: 1;
    background: ${t("textarea.disabled.background")};
    color: ${t("textarea.disabled.color")};
}

.p-textarea::placeholder {
    color: ${t("textarea.placeholder.color")};
}

.p-textarea.ng-invalid.ng-dirty::placeholder {
    color: ${t("textarea.invalid.placeholder.color")};
}

.p-textarea-fluid {
    width: 100%;
}

.p-textarea-resizable {
    overflow: hidden;
    resize: none;
}

.p-textarea-sm {
    font-size: ${t("textarea.sm.font.size")};
    padding-block: ${t("textarea.sm.padding.y")};
    padding-inline: ${t("textarea.sm.padding.x")};
}

.p-textarea-lg {
    font-size: ${t("textarea.lg.font.size")};
    padding-block: ${t("textarea.lg.padding.y")};
    padding-inline: ${t("textarea.lg.padding.x")};
}
`,yt={root:({instance:t,props:n})=>["p-textarea p-component",{"p-filled":t.filled,"p-textarea-resizable ":n.autoResize,"p-invalid":n.invalid,"p-variant-filled":n.variant?n.variant==="filled":t.config.inputStyle==="filled"||t.config.inputVariant==="filled","p-textarea-fluid":n.fluid}]},pt=(()=>{class t extends Ge{name="textarea";theme=_t;classes=yt;static \u0275fac=(()=>{let e;return function(l){return(e||(e=Te(t)))(l||t)}})();static \u0275prov=Ie({token:t,factory:t.\u0275fac})}return t})(),ue=(()=>{class t extends Ue{ngModel;control;autoResize;variant;fluid=!1;pSize;onResize=new Ne;filled;cachedScrollHeight;ngModelSubscription;ngControlSubscription;_componentStyle=Me(pt);constructor(e,r){super(),this.ngModel=e,this.control=r}ngOnInit(){super.ngOnInit(),this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}get hasFluid(){let r=this.el.nativeElement.closest("p-fluid");return this.fluid||!!r}ngAfterViewInit(){super.ngAfterViewInit(),this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe(),super.ngOnDestroy()}static \u0275fac=function(r){return new(r||t)(d(We,8),d(Qe,8))};static \u0275dir=ke({type:t,selectors:[["","pTextarea",""]],hostAttrs:[1,"p-textarea","p-component"],hostVars:16,hostBindings:function(r,l){r&1&&c("input",function(_){return l.onInput(_)}),r&2&&De("p-filled",l.filled)("p-textarea-resizable",l.autoResize)("p-variant-filled",l.variant==="filled"||l.config.inputStyle()==="filled"||l.config.inputVariant()==="filled")("p-textarea-fluid",l.hasFluid)("p-textarea-sm",l.pSize==="small")("p-inputfield-sm",l.pSize==="small")("p-textarea-lg",l.pSize==="large")("p-inputfield-lg",l.pSize==="large")},inputs:{autoResize:[2,"autoResize","autoResize",Ee],variant:"variant",fluid:[2,"fluid","fluid",Ee],pSize:"pSize"},outputs:{onResize:"onResize"},features:[N([pt]),Re]})}return t})(),fe=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ve({type:t});static \u0275inj=Fe({})}return t})()});var kt,ve,ge,ft=I(()=>{"use strict";E();Y();me();ie();le();lt();Ke();w();D();Z();V();Le();E();we();at();st();D();ie();Y();w();me();le();Z();kt=()=>({height:"100%",width:"3.5rem"}),ve=t=>({"ng-invalid ng-dirty":t}),ge=class t{constructor(n,e,r,l,v){this.router=n;this.fb=e;this.messageService=r;this.clientService=l;this.employeeService=v;this.clientForm=this.fb.group({name:["",f.required],representant:["",f.required],principal_address:[""],email:[""],phone:["",f.required],specific_price:[""],payment_requirement:[""],payment_method:["",f.required],facturation_address:[""],notes:[""],tva:[!0],ecomp:[!1]})}clientForm;erreurInput=!1;responseError;loading=!1;payment_methods=[{name:"Orange Money",code:"OM"},{name:"MTN Money",code:"MTN"},{name:"Virement",code:"VIR"},{name:"Esp\xE8ce",code:"ESP"},{name:"Ch\xE8que",code:"CHQ"}];payment_requirements=[{name:"\xC0 la commande",code:"CMD"},{name:"\xC0 la livraison",code:"LIV"},{name:"Net 7 jours",code:"N7"},{name:"Net 15 jours",code:"N15"},{name:"Net 30 jours",code:"N30"},{name:"Paiement \xE9chelonn\xE9",code:"ECH"}];employees=[];ngOnInit(){this.employeeService.getAllUsers().subscribe({next:n=>{this.employees=n},error:n=>{this.showError("Erreur lors de la r\xE9cup\xE9ration des employ\xE9s"),console.error(n.error.error)}})}onSubmit(){this.clientForm.invalid?(this.erreurInput=!0,this.showError("Veuillez remplir tous les champs obligatoires.")):(this.erreurInput=!1,console.log(this.clientForm.value),this.loading=!0,this.clientService.addCient(this.clientForm.value).subscribe({next:()=>{this.showSuccess("Client ajout\xE9 avec succ\xE8s")},error:n=>{this.showError("Erreur lors de l'ajout du client"),console.error(n.error.error),this.loading=!1},complete:()=>{this.loading=!1}}))}showSuccess(n){this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:n})}showError(n){this.messageService.add({severity:"error",summary:"Erreur",detail:n})}clearForm(){this.clientForm.reset()}goToClientList(){this.router.navigate(["clients/clientslist"])}static \u0275fac=function(e){return new(e||t)(d(q),d(G),d($),d(ce),d(de))};static \u0275cmp=F({type:t,selectors:[["app-addclient"]],decls:68,vars:20,consts:[[1,"flex","gap-4","mb-12"],["icon","pi pi-arrow-left","severity","contrast",1,"text-xl",3,"click"],[1,"text-xl"],[1,"text-2xl","font-bold","text-primary"],["action","",1,"w-full","mt-4",3,"ngSubmit","formGroup"],[1,"w-full","mt-4","card"],[1,"flex","flex-col","md:flex-row","gap-6","w-full"],[1,"flex","flex-wrap","gap-2","w-full"],["for","name"],["pInputText","","type","text","id","name","name","name","formControlName","name","required","",3,"ngClass"],["for",""],["formControlName","representant","id","representant","name","representant","optionLabel","lastname","required","",1,"w-full",3,"options","ngClass"],["pInputText","","type","text","id","principal_address","name","principal_address","formControlName","principal_address"],[1,"flex","mt-6","flex-col","md:flex-row","gap-6","w-full"],["pInputText","","type","text","id","email","name","email","formControlName","email"],["pInputText","","type","text","id","phone","name","phone","formControlName","phone","required","",3,"ngClass"],["formControlName","payment_method","optionLabel","name","required","",1,"w-full",3,"options","ngClass"],["pInputText","","type","text","id","specific_price","name","specific_price","formControlName","specific_price"],["formControlName","payment_requirement","optionLabel","name",1,"w-full",3,"options"],["pInputText","","type","text","id","facturation_address","name","facturation_address","formControlName","facturation_address"],[1,"flex","flex-col","mt-6","md:flex-row","gap-6","w-full"],["rows","5","cols","30","pTextarea","","formControlName","notes"],[1,"flex","flex-wrap","mt-6","gap-2","w-full"],["id","tva","binary","true","formControlName","tva"],["for","tva"],["id","ecomp","binary","true","formControlName","ecomp"],["for","ecomp"],[1,"flex","flex-wrap","gap-4","mb-6","mt-6"],["label","Vider","icon","pi pi-times","severity","danger","outlined","",3,"click"],["type","submit","label","Enregister","icon","pi pi-save","severity","contrast",3,"loading"]],template:function(e,r){e&1&&(o(0,"p-fluid")(1,"div",0)(2,"div")(3,"p-button",1),c("click",function(){return r.goToClientList()}),i()(),o(4,"div")(5,"div")(6,"span",2),a(7,"Retourner \xE0 la liste des clients"),i()(),o(8,"div")(9,"span",3),a(10,"Enregistrer un client"),i()()()(),o(11,"form",4),c("ngSubmit",function(){return r.onSubmit()}),o(12,"div",5)(13,"div",6)(14,"div",7)(15,"label",8),a(16,"Nom"),i(),s(17,"input",9),i(),o(18,"div",7)(19,"label",10),a(20,"Representant"),i(),s(21,"p-select",11),i(),o(22,"div",7)(23,"label",10),a(24,"Adresse principale"),i(),s(25,"input",12),i()(),o(26,"div",13)(27,"div",7)(28,"label",10),a(29,"Email"),i(),s(30,"input",14),i(),o(31,"div",7)(32,"label",10),a(33,"T\xE9l\xE9phone"),i(),s(34,"input",15),i(),o(35,"div",7)(36,"label",10),a(37,"M\xE9thode de paiement"),i(),s(38,"p-select",16),i()(),o(39,"div",13)(40,"div",7)(41,"label",10),a(42,"% Reduction"),i(),s(43,"input",17),i(),o(44,"div",7)(45,"label",10),a(46,"Conditions de paiement"),i(),s(47,"p-select",18),i(),o(48,"div",7)(49,"label",10),a(50,"Adresse de facturation"),i(),s(51,"input",19),i()(),o(52,"div",20)(53,"div",7)(54,"label",10),a(55,"Notes"),i(),s(56,"textarea",21),i()(),o(57,"div",22),s(58,"p-checkbox",23),o(59,"label",24),a(60,"Avec TVA"),i()(),o(61,"div",22),s(62,"p-checkbox",25),o(63,"label",26),a(64,"Avec ECOMP"),i()()(),o(65,"div",27)(66,"p-button",28),c("click",function(){return r.clearForm()}),i(),s(67,"p-button",29),i()()()),e&2&&(m(3),M(y(11,kt)),m(8),p("formGroup",r.clientForm),m(6),p("ngClass",x(12,ve,r.erreurInput&&r.clientForm.controls.name.errors)),m(4),p("options",r.employees)("ngClass",x(14,ve,r.erreurInput&&r.clientForm.controls.representant.errors)),m(13),p("ngClass",x(16,ve,r.erreurInput&&r.clientForm.controls.phone.errors)),m(4),p("options",r.payment_methods)("ngClass",x(18,ve,r.erreurInput&&r.clientForm.controls.payment_method.errors)),m(9),p("options",r.payment_requirements),m(20),p("loading",r.loading))},dependencies:[R,k,te,ee,K,U,W,H,z,A,P,L,B,O,Q,fe,ue,se,ae,oe,re,ne,pe,X,J],encapsulation:2})}});function Pt(t,n){t&1&&(o(0,"tr")(1,"th"),a(2,"Noms"),i(),o(3,"th"),a(4,"Repr\xE9sentants"),i(),o(5,"th"),a(6,"Conditions de paiement"),i(),o(7,"th"),a(8,"M\xE9thode de paiement"),i(),o(9,"th"),a(10,"% R\xE9duction"),i(),o(11,"th"),a(12,"T\xE9l\xE9phone"),i(),s(13,"th"),i())}function Ht(t,n){if(t&1){let e=b();o(0,"tr")(1,"td",22),a(2),i(),o(3,"td")(4,"p-button",23),c("click",function(){let l=g(e).$implicit,v=u(2);return h(v.goToEmplyeeDetails(l.representant))}),i()(),o(5,"td"),a(6),i(),o(7,"td"),a(8),i(),o(9,"td"),a(10),Pe(11,"number"),i(),o(12,"td"),a(13),i(),o(14,"td")(15,"div",24)(16,"div")(17,"p-button",25),c("onClick",function(){let l=g(e).$implicit,v=u(2);return h(v.goToDetails(l))}),i()(),o(18,"div")(19,"p-button",26),c("click",function(l){let v=g(e).$implicit,_=u(2);return h(_.trash(l,v))}),i()()()()()}if(t&2){let e=n.$implicit,r=u(2);m(2),T(" ",e.name," "),m(2),qe("label",r.getEmployeeName(e.representant)),m(2),Se(e.payment_requirement),m(2),T(" ",e.payment_method," "),m(2),T(" ",He(11,8,e.specific_price*100,"1.2-2")," "),m(3),Se(e.phone),m(4),p("outlined",!0),m(2),p("outlined",!0)}}function Bt(t,n){t&1&&(o(0,"div",27),s(1,"img",28),i())}function Ot(t,n){if(t&1){let e=b();o(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"p-iconfield"),s(5,"p-inputicon",14),o(6,"input",15),c("input",function(l){g(e);let v=u();return h(v.applyFilter(l))}),i()()()(),o(7,"div",16)(8,"p-button",17),c("click",function(){g(e);let l=u();return h(l.gotToAddClient())}),i(),o(9,"p-button",18),c("onClick",function(){g(e);let l=u();return h(l.exportCSV())}),i()()(),o(10,"div",19)(11,"p-table",20,2),C(13,Pt,14,0,"ng-template",null,3,S)(15,Ht,20,11,"ng-template",null,4,S),i()(),C(17,Bt,2,0,"div",21),i()}if(t&2){let e=u();m(11),p("value",e.clients)("globalFilterFields",y(7,$t))("tableStyle",y(8,zt))("paginator",!0)("rows",40)("rowsPerPageOptions",y(9,At)),m(6),p("ngIf",e.clients.length<=0)}}function Lt(t,n){t&1&&(o(0,"div",27),s(1,"img",29),i())}function Gt(t,n){if(t&1){let e=b();o(0,"p-fluid")(1,"form",30),c("ngSubmit",function(){g(e);let l=u();return h(l.onSubmit())}),o(2,"div",31)(3,"div",32)(4,"div",33)(5,"label",34),a(6,"Nom"),i(),s(7,"input",35),i(),o(8,"div",33)(9,"label",36),a(10,"Representant"),i(),s(11,"p-select",37),i()(),o(12,"div",38)(13,"div",33)(14,"label",36),a(15,"Adresse principale"),i(),s(16,"input",39),i(),o(17,"div",33)(18,"label",36),a(19,"Email"),i(),s(20,"input",40),i()(),o(21,"div",41)(22,"div",33)(23,"label",36),a(24,"T\xE9l\xE9phone"),i(),s(25,"input",42),i(),o(26,"div",33)(27,"label",36),a(28,"M\xE9thode de paiement"),i(),s(29,"p-select",43),i()(),o(30,"div",41)(31,"div",33)(32,"label",36),a(33,"% Reduction"),i(),s(34,"input",44),i(),o(35,"div",33)(36,"label",36),a(37,"Conditions de paiement"),i(),s(38,"p-select",45),i()(),o(39,"div",41)(40,"div",33)(41,"label",36),a(42,"Adresse de facturation"),i(),s(43,"input",46),i()(),o(44,"div",47)(45,"div",33)(46,"label",36),a(47,"Notes"),i(),s(48,"textarea",48),i()(),o(49,"div",49),s(50,"p-checkbox",50),o(51,"label",51),a(52,"Avec TVA"),i()(),o(53,"div",49),s(54,"p-checkbox",52),o(55,"label",53),a(56,"Avec ECOMP"),i()()()()()}if(t&2){let e=u();m(),p("formGroup",e.clientForm),m(6),p("ngClass",x(8,he,e.erreurInput&&e.clientForm.controls.name.errors)),m(4),p("options",e.employees)("ngClass",x(10,he,e.erreurInput&&e.clientForm.controls.representant.errors)),m(14),p("ngClass",x(12,he,e.erreurInput&&e.clientForm.controls.phone.errors)),m(4),p("options",e.payment_methods)("ngClass",x(14,he,e.erreurInput&&e.clientForm.controls.payment_method.errors)),m(9),p("options",e.payment_requirements)}}function Qt(t,n){if(t&1){let e=b();o(0,"p-button",54),c("click",function(){g(e);let l=u();return h(l.clearForm())}),i(),o(1,"p-button",55),c("click",function(){g(e);let l=u();return h(l.onSubmit())}),i()}if(t&2){let e=u();m(),p("loading",e.loading)}}var Rt,Dt,qt,jt,$t,zt,At,he,xe,vt=I(()=>{"use strict";E();we();rt();D();Y();xt();lt();me();Xe();tt();Ke();ie();le();Z();w();V();at();st();Le();we();E();rt();D();Y();tt();Xe();me();ie();le();Z();w();Rt=["dt"],Dt=["op"],qt=()=>({width:"50vw","max-height":"90vh","overflow-y":"auto"}),jt=()=>({"1199px":"75vw","575px":"90vw"}),$t=()=>["name","representant","specific_price","phone","payment_method","payment_requirement"],zt=()=>({"min-width":"75vw"}),At=()=>[10,20,40,60],he=t=>({"ng-invalid ng-dirty":t});xe=class t{constructor(n,e,r,l,v,_){this.clientService=n;this.employeeService=e;this.router=r;this.confirmationService=l;this.messageService=v;this.fb=_}dt;op;clients=[];employees=[];selectedClientsProducts=[];visible=!1;clientName;clientDetailsDialog=!1;clientForm;erreurInput=!1;responseError;loading=!1;status=[{name:"Active",code:"0"},{name:"Inactive",code:"1"}];payment_methods=[{name:"Orange Money",code:"OM"},{name:"MTN Money",code:"MTN"},{name:"Virement",code:"VIR"},{name:"Esp\xE8ce",code:"ESP"},{name:"Ch\xE8que",code:"CHQ"}];payment_requirements=[{name:"\xC0 la commande",code:"CMD"},{name:"\xC0 la livraison",code:"LIV"},{name:"Net 7 jours",code:"N7"},{name:"Net 15 jours",code:"N15"},{name:"Net 30 jours",code:"N30"},{name:"Paiement \xE9chelonn\xE9",code:"ECH"}];client={};ngOnInit(){this.clientService.getAllClients().subscribe({next:n=>{this.clients=n},error:n=>{this.showError(n.error.error),console.error(n.error.error)}}),this.employeeService.getAllUsers().subscribe({next:n=>{this.employees=n,console.log(this.employees)},error:n=>{console.error(n.error.error)}}),this.clientForm=this.fb.group({name:["",f.required],representant:["",f.required],principal_address:[""],email:[""],phone:["",f.required],specific_price:[""],payment_requirement:[""],payment_method:["",f.required],facturation_address:[""],notes:[""],tva:[!1],ecomp:[!1]})}goToDetails(n){this.client=n,this.clientDetailsDialog=!0,this.clientForm=this.fb.group({name:[n.name,f.required],representant:[this.mapEmployee(n.representant)||null,f.required],principal_address:[n.principal_address],email:[n.email],phone:[n.phone,f.required],specific_price:[n.specific_price*100],payment_requirement:[this.payment_requirements[this.mapPayment_requirement(n.payment_requirement)]||null],payment_method:[this.payment_methods[this.mapPaymentMethod(n.payment_method)]||null],facturation_address:[n.facturation_address],notes:[n.notes],tva:[n.assujetti_tva],ecomp:[n.concern_ecomp]})}goToEmplyeeDetails(n){this.showSuccess("D\xE9tails de l'employ\xE9  "+n)}mapEmployee(n){return this.employees.find(e=>e.id===n)||null}mapPayment_requirement(n){let e=this.payment_requirements.findIndex(r=>r.name===n);return e!==-1?e:0}mapPaymentMethod(n){let e=this.payment_methods.findIndex(r=>r.name===n);return e!==-1?e:0}getEmployeeName(n){let e=this.employees.find(r=>r.id===n);return e?`${e.firstname} ${e.lastname}`:"N/A"}gotToAddClient(){this.router.navigate(["clients/addclient"])}trash(n,e){this.confirmationService.confirm({target:n.target,message:"Voulez-vous supprimer ce client ?",header:"Supprimer",icon:"fa-solid fa-circle-info",rejectLabel:"annuler",rejectButtonProps:{label:"Annuler",severity:"secondary",outlined:!0},acceptButtonProps:{label:"Confirmer",severity:"danger"},accept:()=>{this.clientService.deleteCient(e.id).subscribe({next:()=>{this.clients=this.clients.filter(r=>r.id!==e.id),this.showSuccess("Suppression r\xE9ussie")},error:()=>{this.showError("\xC9chec de la suppression")}})},reject:()=>{this.showError("supprission annul\xE9")}})}toggle(n){this.op.toggle(n)}onSubmit(){if(this.loading=!0,console.log(this.clientForm.value),this.clientForm.valid){let n=_e(_e({},this.client),this.clientForm.value);this.clientService.updateCient(n,this.client.id).subscribe({next:e=>{this.showSuccess("Client mis \xE0 jour avec succ\xE8s !"),this.loading=!1;let r=this.clients.findIndex(l=>l.id===this.client.id);r!==-1&&(this.clients[r]=e,this.clients=[...this.clients])},error:e=>{this.showError(e.error.error),this.loading=!1}})}else this.erreurInput=!0,this.loading=!1,console.log("Erreur dans le formulaire"),this.showError("Veuillez remplir tous les champs obligatoires.")}applyFilter(n){let e=n.target;e&&this.dt.filterGlobal(e.value,"contains")}gotToAddEmployees(){this.router.navigate(["employees/addclient"])}exportCSV(){this.dt.exportCSV()}showSuccess(n){this.messageService.add({severity:"success",summary:"Succ\xE8s",detail:n})}showError(n){this.messageService.add({severity:"error",summary:"Erreur",detail:n})}clearForm(){this.clientForm.reset()}clearSelectedClient(){this.selectedClientsProducts=[]}static \u0275fac=function(e){return new(e||t)(d(ce),d(de),d(q),d(j),d($),d(G))};static \u0275cmp=F({type:t,selectors:[["app-clientslist"]],viewQuery:function(e,r){if(e&1&&(ye(Rt,5),ye(Dt,5)),e&2){let l;be(l=Ce())&&(r.dt=l.first),be(l=Ce())&&(r.op=l.first)}},features:[N([j])],decls:10,vars:13,consts:[["content",""],["footer",""],["dt",""],["header",""],["body",""],[1,""],["class","card",4,"ngIf"],["style",`
            display: flex;
            align-items: center;
            justify-content: center;
            height: 89vh;
        `,4,"ngIf"],[1,"card","flex","justify-center","gap-2"],[3,"visibleChange","onHide","header","visible","modal","breakpoints","resizable"],[1,"card"],[1,"flex","justify-between","gap-4"],[1,"w-full"],[1,"flex","items-center","justify-between"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Rechercher un client...",3,"input"],[1,"flex","gap-4"],["label","Ajouter","icon","fa-solid fa-plus","severity","contrast",3,"click"],["label","Exporter","icon","pi pi-upload","severity","secondary",3,"onClick"],[1,"mt-4"],["selectionMode","single","dataKey","id",3,"value","globalFilterFields","tableStyle","paginator","rows","rowsPerPageOptions"],["style",`
                display: flex;
                align-items: center;
                justify-content: center;
                height: 89vh;
            `,4,"ngIf"],[1,"name-td"],["severity","info","text","",3,"click","label"],[2,"display","flex","gap","1rem"],["label","","severity","info","icon","fa-solid fa-pencil",3,"onClick","outlined"],["label","","severity","danger","icon","fa-solid fa-trash-can",3,"click","outlined"],[2,"display","flex","align-items","center","justify-content","center","height","89vh"],["src","img/No data-rafiki.svg","alt","",2,"width","26rem"],["src","img/No data-rafiki.svg","alt","",2,"width","35rem"],["action","",1,"w-full","mt-4",3,"ngSubmit","formGroup"],[1,"w-full","mt-4","card"],[1,"flex","flex-col","md:flex-row","gap-6","w-full"],[1,"flex","flex-wrap","gap-2","w-full"],["for","name"],["pInputText","","type","text","id","name","name","name","formControlName","name","required","",3,"ngClass"],["for",""],["formControlName","representant","id","representant","name","representant","optionLabel","lastname","required","",1,"w-full",3,"options","ngClass"],[1,"flex","flex-col","md:flex-row","mt-4","gap-6","w-full"],["pInputText","","type","text","id","principal_address","name","principal_address","formControlName","principal_address"],["pInputText","","type","text","id","email","name","email","formControlName","email"],[1,"flex","mt-6","flex-col","md:flex-row","gap-6","w-full"],["pInputText","","type","text","id","phone","name","phone","formControlName","phone","required","",3,"ngClass"],["formControlName","payment_method","optionLabel","name","required","",1,"w-full",3,"options","ngClass"],["pInputText","","type","text","id","specific_price","name","specific_price","formControlName","specific_price"],["formControlName","payment_requirement","optionLabel","name",1,"w-full",3,"options"],["pInputText","","type","text","id","facturation_address","name","facturation_address","formControlName","facturation_address"],[1,"flex","flex-col","mt-6","md:flex-row","gap-6","w-full"],["rows","5","cols","30","pTextarea","","formControlName","notes"],[1,"flex","flex-wrap","mt-6","gap-2","w-full"],["id","tva","binary","true","formControlName","tva"],["for","tva"],["id","ecomp","binary","true","formControlName","ecomp"],["for","ecomp"],["label","Vider","icon","pi pi-times","severity","danger","outlined","",3,"click"],["type","submit","label","Enregister","icon","pi pi-save","severity","contrast",3,"click","loading"]],template:function(e,r){if(e&1){let l=b();o(0,"div",5),C(1,Ot,18,10,"div",6)(2,Lt,2,0,"div",7),o(3,"div",8),s(4,"p-confirmdialog"),i(),o(5,"p-dialog",9),Ae("visibleChange",function(_){return g(l),ze(r.clientDetailsDialog,_)||(r.clientDetailsDialog=_),h(_)}),c("onHide",function(){return g(l),h(r.clearSelectedClient())}),C(6,Gt,57,16,"ng-template",null,0,S)(8,Qt,2,1,"ng-template",null,1,S),i()()}e&2&&(m(),p("ngIf",r.clients.length>0),m(),p("ngIf",r.clients.length<=0),m(3),M(y(11,qt)),je("header","Details du client ",r.client.name,""),$e("visible",r.clientDetailsDialog),p("modal",!0)("breakpoints",y(12,jt))("resizable",!1)("modal",!0))},dependencies:[nt,it,R,k,Be,Oe,K,U,mt,ot,et,Ze,Je,Ye,se,ae,te,ee,ne,oe,re,Q,H,z,A,P,L,W,B,O,pe,X,J,fe,ue],encapsulation:2})}});var Gi,Wt=I(()=>{ft();vt();Gi=[{path:"addclient",component:ge},{path:"clientslist",component:xe}]});Wt();export{Gi as default};
